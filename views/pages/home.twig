{% extends 'base.twig' %}

{% block body %}
	<div class="page-home">
		<section class="hero">
			<div class="container">
				<h1 class="hero__title">
					<p class="text-reveal" translate>{{ __('Bienvenue à <br>la Fête du Sleep !', 'fetedusleep') }}</p>
					<div class="img-container parallax" data-speed="-15">
						<img src="{{ function('get_template_directory_uri') }}/src/images/tetine.png" alt=""/>
					</div>
				</h1>
				<div class="hero__intro">
					<p class="text-reveal">
						{{ post.meta('intro') }}
					</p>
					{% set consultations_page = function('get_page_by_path', 'mes-consultations') %}
                    {% if consultations_page %}
                        {% set consultations_post_id = function('pll_get_post', consultations_page.ID) %}
                        <a href="{{ function('get_the_permalink', consultations_post_id) }}" class="btn-primary green">{{ __('Voir mes consultations', 'fetedusleep') }}</a>
                    {% endif %}
				</div>
			</div>
			
		</section>

		<pre>
			{{ dump(services) }}
		</pre>

		{# Services #}	

		<div class="desktop social">
				<ul>
					<li>
						<a href="{{ options.instagram }}" target="_blank" rel="noopener noreferrer">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
								<g id="RS_instagram" transform="translate(-9 -5.69)">
									<path id="Tracé_438" data-name="Tracé 438" d="M18.983,7.493c2.67,0,2.976,0,4.039.06A5.527,5.527,0,0,1,24.88,7.9a3.312,3.312,0,0,1,1.9,1.9,5.527,5.527,0,0,1,.344,1.858c.047,1.054.06,1.369.06,4.039s0,2.976-.06,4.039a5.527,5.527,0,0,1-.344,1.858,3.312,3.312,0,0,1-1.9,1.9,5.527,5.527,0,0,1-1.858.344c-1.054.047-1.369.06-4.039.06s-2.976,0-4.039-.06a5.527,5.527,0,0,1-1.858-.344,3.312,3.312,0,0,1-1.9-1.9,5.527,5.527,0,0,1-.344-1.858c-.047-1.054-.06-1.369-.06-4.039s0-2.976.06-4.039a5.527,5.527,0,0,1,.344-1.858,3.312,3.312,0,0,1,1.9-1.9,5.527,5.527,0,0,1,1.866-.344c1.054-.047,1.369-.06,4.039-.06m0-1.8c-2.717,0-3.057,0-4.124.06a7.343,7.343,0,0,0-2.428.463A5.1,5.1,0,0,0,9.514,9.138a7.338,7.338,0,0,0-.472,2.428C9,12.625,9,12.973,9,15.69s0,3.057.06,4.124a7.338,7.338,0,0,0,.463,2.428,5.1,5.1,0,0,0,2.925,2.925,7.343,7.343,0,0,0,2.428.463c1.067.047,1.407.06,4.124.06s3.057,0,4.124-.06a7.343,7.343,0,0,0,2.428-.463,5.1,5.1,0,0,0,2.925-2.925,7.338,7.338,0,0,0,.463-2.428c.047-1.067.06-1.407.06-4.124s0-3.057-.06-4.124a7.338,7.338,0,0,0-.463-2.428,5.1,5.1,0,0,0-2.925-2.925,7.343,7.343,0,0,0-2.428-.463C22.057,5.7,21.717,5.69,19,5.69" transform="translate(0 0)" fill="#343539"/>
									<path id="Tracé_439" data-name="Tracé 439" d="M25.53,17.13a5.136,5.136,0,1,0,5.132,5.136A5.136,5.136,0,0,0,25.53,17.13m0,8.469a3.333,3.333,0,1,1,3.333-3.333A3.333,3.333,0,0,1,25.53,25.6" transform="translate(-6.547 -6.576)" fill="#343539"/>
									<path id="Tracé_440" data-name="Tracé 440" d="M44.608,15.033a1.909,1.909,0,1,0-.013,0" transform="translate(-19.09 -4.679)" fill="#343539"/>
								</g>
							</svg>
						</a>
					</li>

					<li>
						<a href="{{ options.tiktok }}" target="_blank" rel="noopener noreferrer">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="23.076" viewBox="0 0 20 23.076">
								<path id="Logo_Tiktok_SVG_Vector_Icon" data-name="Logo Tiktok SVG Vector Icon" d="M65.468,20.935a5.254,5.254,0,0,1-.454-.264,6.387,6.387,0,0,1-1.167-.991,5.5,5.5,0,0,1-1.315-2.713h0A3.342,3.342,0,0,1,62.485,16H58.522V31.324c0,.206,0,.409-.009.61,0,.025,0,.048,0,.075a.166.166,0,0,1,0,.034v.009a3.365,3.365,0,0,1-1.693,2.671,3.307,3.307,0,0,1-1.64.433,3.365,3.365,0,0,1,0-6.73,3.312,3.312,0,0,1,1.029.163l0-4.035a7.362,7.362,0,0,0-5.673,1.659,7.778,7.778,0,0,0-1.7,2.093,7.251,7.251,0,0,0-.875,3.329,7.856,7.856,0,0,0,.425,2.631v.01a7.745,7.745,0,0,0,1.076,1.962,8.054,8.054,0,0,0,1.717,1.62v-.01l.01.01a7.416,7.416,0,0,0,4.046,1.218,7.162,7.162,0,0,0,3-.664,7.535,7.535,0,0,0,2.438-1.833,7.618,7.618,0,0,0,1.329-2.208,8.271,8.271,0,0,0,.478-2.525v-8.13c.048.029.688.452.688.452a9.166,9.166,0,0,0,2.362.976,13.6,13.6,0,0,0,2.424.332V21.541A5.139,5.139,0,0,1,65.468,20.935Z" transform="translate(-47.959 -16)" fill="#343539"/>
							</svg>
						</a>
					</li>
				</ul>
			</div>

		{# Image principale #}
		<section class="thumbnail">
			<div class="img-container">
				<img src="{{ post.thumbnail.sizes['xl']['file'] }}"
					alt="La fête du sleep - Sleep coach"
					srcset="{{ post.thumbnail.srcset }}"
					sizes="100vw"
					class="parallax" 
					data-speed="10" 
					loading="lazy"
					/>
			</div>
		</section>

		{# Présentation #}
		<section class="presentation">
			<div class="container">
				<h2 class="presentation__accroche">
					<div class="text-reveal">{{ post.meta('accroche') }}</div>
				</h2>
				<div class="presentation__content">
					<div class="text-reveal">{{ post.meta('presentation') }}</div>
					{# <div class="presentation__content__links">
						{% set consultations_page = function('get_page_by_path', 'mes-consultations') %}
						{% if consultations_page %}
							{% set consultations_post_id = function('pll_get_post', consultations_page.ID) %}
							<a href="{{ function('get_the_permalink', consultations_post_id) }}" class="btn-primary green">{{ __('Voir mes consultations', 'fetedusleep') }}</a>
						{% endif %}
					</div> #}
				</div>
			</div>
		</section>


		{# Livre #}
		{# <section class="book">
			<div class="container">
				<h2 class="book__title">La fête du sleep, le livre</h2>
			</div>
		</section> #}


		{# Mes consultations #}
		<section class="categories">
            <div class="container">
				<h2 class="categories__title text-reveal" translate>
					{{ __('Mes consultations', 'fetedusleep') }}
				</h2>
                <ul class="list">
                    {% for type_consultation in consultations %}
                        <li class="item">
                            <a href="{{ function('get_term_link', type_consultation.term_id) }}">
                                <div class="img-container">
                                    {% set image =
                                        function(
                                            'get_field',
                                            'image',
                                            'types-consultation_' ~ type_consultation.term_id
                                        )
                                    %}
                                    {% if image %}
                                        <img src="{{ image.sizes.medium_large }}"
                                            alt="{{ type_consultation.title }}"
                                            srcset="{{ image.sizes['medium'] }} {{ image.sizes['medium-width'] }}w, {{
                                            image.sizes['large']
                                            }} {{ image.sizes['large-width'] }}w, {{ image.sizes['xl'] }} {{ image.sizes['xl-width'] }}w"
                                            sizes="(max-width: 768px) 100vw, 33vw" 
                                            loading="lazy" />
                                    {% endif %}
                                </div>
                                <p class="item-title">
                                    {{ type_consultation.name }}
                                </p>
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </section>

	</div>

	{% include 'components/_temoignages.twig' %}
{% endblock %}
